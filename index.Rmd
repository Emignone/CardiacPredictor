---
title: "Cardiac events predictor"
output: html_document
---
```{r setup, include=FALSE}
library(knitr)
library(ggplot2)
library(plotly)
knitr::opts_chunk$set(error = FALSE, echo = FALSE)
knitr::opts_knit$set(root.dir= normalizePath('..'))
knitr::opts_chunk$set(error = FALSE)
knitr::opts_chunk$set(echo = TRUE)
```

```{r include=FALSE}
dataset <- read.csv("CardiacPredictor/dataset.csv", sep=";", dec = ",")
```


<div class="row" style="padding-top: 30px;">
<div class="col-sm-6">

We have analyzed the given dataset from different perspectives. 
We started by researching on the subject and becoming familiar with the different concepts and pathologies. After understanding the subject, we proceeded to apply the knowledge, both in the analysis, the interpretation and finally in the predictor.

## Analysis

```{r}

```

### **Gender**

***

```{r echo=FALSE}

labels = c('WOMEN','MEN')
values = c(sum(dataset$SEXO=="FEME"), sum(dataset$SEXO=="MASC"))

sexPercentages <- plot_ly(type='pie', labels=labels, values=values, 
                   textinfo='label+percent',
                   insidetextorientation='radial',
                   marker =list(colors =  c("#8ACBDE","#003A7D")))
sexPercentages
```


### **Abnormal Fey**

***

```{r echo=FALSE}
library(plotly)
  feyUnder40 = subset(dataset,dataset$FEY<40)
  feyHistogram <- plot_ly(type='histogram',x= feyUnder40$FEY, name = "SEVERE", marker = 
                       list(color= "#003A7D",line=list(color="darkgray",width=0.0))
                     ,nbinsx=5)
  feyBtw41_49 = subset(dataset,dataset$FEY>=41 & dataset$FEY<=49)
  feyOver50 = subset(dataset,dataset$FEY>50)
  feyHistogram <- feyHistogram %>% add_histogram(x=feyBtw41_49$FEY, name = "LIMIT", marker = 
                                         list(color= "#8ACBDE",
                                              line=list(color="darkgray",width=0.0))
                                       ,nbinsx=3)
  feyHistogram <- feyHistogram %>% add_histogram(x=feyOver50$FEY, name = "NORMAL", marker = 
                                         list(color= "#C5C6D0",
                                              line=list(color="darkgray",width=0.0))
                                       ,nbinsx=10)
  feyHistogram <- feyHistogram %>% layout(barmode = "overlay", 
                                xaxis = list(title = "Eyection Fraction (%)")
                                ,yaxis = list(title = "N of Patients"))
  feyHistogram
```


### **Surgery in Diabetic patients**

***
# 

It has been proven that diabetes is a significant factor when it comes to cardiology. We as a team decided to know which procedures do diabetic patients have, as to provide a deeper insight to the dataset

```{r echo=FALSE}
library(plotly)
diabetics <- subset(dataset,dataset$DIABETES==1)

labels = c('Surgery','Angioplasty', 'Endovalve')
values = c(sum(diabetics$PROCEDIMIENTO == "CIRUGIA"), sum(diabetics$PROCEDIMIENTO == "ANGIOPLASTIA"),sum(diabetics$PROCEDIMIENTO == "ENDOVALVULA"))

procedureInDiabetics <- plot_ly(type='pie', labels=labels, values=values, 
               textinfo='label+percent',
               insidetextorientation='radial',
               marker =list(colors =  c("#003A7D","#8ACBDE",  "#C5C6D0"))
               )
procedureInDiabetics
```


### **Men with Morbid Obesity**

*** 
```{r echo=FALSE}
library(ggplot2)
men <- subset(dataset, dataset$SEXO=="MASC")
labels = c("Men with Obesity", "Men without Obesity")
values = c(sum(men$OBESIDAD.MORBIDA == 1), sum(men$OBESIDAD.MORBIDA == 0))
menMorbidObesity<-plot_ly(type='pie', labels=labels, values=values, 
               textinfo='label+percent',
               insidetextorientation='radial',
               marker =list(colors =  c("#003A7D","#8ACBDE"))
               )
menMorbidObesity
```



</div>
<div class="col-sm-6">

### [Universidad Austral](https://www.austral.edu.ar/)

<a href = "https://www.austral.edu.ar/">
![](images/LogoAustral.png)
</a>
</div>
